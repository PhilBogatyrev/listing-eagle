{"ast":null,"code":"var __jsx = React.createElement;\nimport React from \"react\";\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport nodeRSA from \"node-rsa\";\n\nconst Search = ({\n  query,\n  querySent,\n  onSearch\n}) => {\n  console.log(\"query: \", query);\n  const {\n    0: message,\n    1: setMessage\n  } = useState(\"\");\n  const {\n    0: searchQuery,\n    1: setSearchQuery\n  } = useState(\"\");\n  const {\n    0: fact,\n    1: setFact\n  } = useState({\n    items: [],\n    isLoaded: false\n  });\n\n  const handleChange = event => {\n    event.preventDefault();\n    setMessage(event.target.value); //console.log(\"value is:\", event.target.value);\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    setSearchQuery(event.target.queryField.value);\n    onSearch({\n      query: event.target.queryField.value,\n      querySent: querySent\n    });\n    newCatFact(); //ebayResponse();\n    //walmartSearch();\n\n    getToken();\n  };\n\n  const newCatFact = () => {\n    fetch(\"https://catfact.ninja/fact\").then(res => res.json()).then(json => {\n      setFact({\n        items: json,\n        isLoaded: true\n      });\n      console.log(json.fact);\n    });\n  };\n\n  const clientCredentials = \"PhilippB-Fiindii-SBX-df2241f4a-e35c32c6:SBX-f2241f4a8c44-5844-41c8-b1fa-ab89\";\n  const base64ClientCredentials = \"Basic \" + window.btoa(clientCredentials);\n  console.log(base64ClientCredentials);\n  const wrongKey = \"-----BEGIN PRIVATE KEY-----AAABvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCvBTvvOaSjaGCoxOUcjQG4xqWDnt/mq/2IV8m1cmaaCwUJQLrsOXK7Q46JziP4o9IWpzV9S1NAJPzaLOR6JsnyDNa8lWNDQDd6kL9m+6Qzn4bc6/FFAUYB6BFQi1HbguIGMfJOdqnR5tFYNoZzd5Fx2YSqWwF0LgoW1fH3e5Oe9ZVelzouDPTzF0ewRIRKaVe2nG2hwqqG0XWDnYt65TvQRFPwFtE38GhJgVrjokFL89cFE9ZfyMh5KYV6myEUFz5gQpqigVhG9z6mQl6pIeoACW17bIAOpQQRyX/bNLkQoQPo+Z7YQ/kHKwSTMBLj6BBB7IaaB3UIyCZMPA1bZw0dAgMBAAECggEBAJwJEpII1htJJ0PPpmN54xsVHuLldcB1fadcfNxjjc2wHWFOcFfCL+N8K0v4mGFHzDmeATYfPa1mTHdGpruwcUJ258thdAm06sE+4yWxG4dapiW3xHY82GlCuI0SaHxHh7L2PIxvhp84JVN76Qpwgx75SimG0Rj/IseRHhQB/G4uEuoU98ia0dsCQzD9iOB1kxwpDXdgMWLZNnceV4m1s0b9Rt4axnfvjTdVv9DIyipHsAuPqbSlX66zEeBPAsdYgiN10TdO0IaCfnalAdZ8M+GLUn6HbuCxA3jK2fQypd8eo1ZdLAIP2O08OzB+33gnQ33Ib4YgsqyZEHB+K+S5PwECgYEA17U30WpCYCX1NzzUevA7KmGXzv3RgZAANy1io5ReH2ZdF1NcfCFcahzf4PBcMZEEuVLO0FJReHqkATeauXhF/oZDYR4EbQlhQ+J/qtJO4W+sl9gpWwazBmyXWnEN2zgw2IvSupgi1U3GPgxxpXE5vE1NLvEo0yaAOlWYeTRdizECgYEAz7ZplWVwNQyy42CzB5dIQeZb8Z+WnkBTrr8Dej22owJXM4TeNIxgwoDzvxQhyZ0G3vCKTDmHspygrd7s1RUQdWkhd5tOdWiUv5wni0ldRFZAHAfsGusHMkR6ZKbtxp2wdgCGjgbWjdInEKzNC1M1yWi/vfJfQEJgVKfvvo1mja0CgYBHTFDc2UCDQ0igL20UDZ+gzI0/D8pWBuDrXAcEhp/txQn0Ecu6A9TmBhFB6nCuuX5UOzi8xtjC99aJyHVN5KFOFdbjnOZdnAIYTB9iuQz1mtHzhrF0suwtrWsBq+imkxYiHWVT48Fvu7tQ+w/9XUV2Jh7i6zdRQ6KSpYQ2W8anoQKBgHafwqTjjbV+Txu0Ogp3x3h7Sr8vWSF/s0r1I9NIM2ndCFgP5ac1FH2Aj7Psl29BEo936EOoB2tmMA2cZr06jm+/XrGkLKa411qmn57Ygz9n0q0viRPGbhGzMgMRonHv1LtPiYjLNvU/s7e+OEvjdbBU9kxQgz17qvAuCKlWr97xAoGBAMk5zMGtxI87t1sEqybVRowTHofWhZVJS2lOeUMgYh3Xv+TtdMtMhTXXz7dgXd7j5Vk1Vawdo/sqTgtiyQ8xlUxVW+B+tzEHhcq8mh98FcYIqf0SPOmFiJBbuGyC+qIrXNFiGPgIetdXk2arXOr87XAQ4QLmQvs/YPgQ3fv4vTVm-----END PRIVATE KEY-----\";\n  const privateKey = \"-----BEGIN PRIVATE KEY-----MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCvBTvvOaSjaGCoxOUcjQG4xqWDnt/mq/2IV8m1cmaaCwUJQLrsOXK7Q46JziP4o9IWpzV9S1NAJPzaLOR6JsnyDNa8lWNDQDd6kL9m+6Qzn4bc6/FFAUYB6BFQi1HbguIGMfJOdqnR5tFYNoZzd5Fx2YSqWwF0LgoW1fH3e5Oe9ZVelzouDPTzF0ewRIRKaVe2nG2hwqqG0XWDnYt65TvQRFPwFtE38GhJgVrjokFL89cFE9ZfyMh5KYV6myEUFz5gQpqigVhG9z6mQl6pIeoACW17bIAOpQQRyX/bNLkQoQPo+Z7YQ/kHKwSTMBLj6BBB7IaaB3UIyCZMPA1bZw0dAgMBAAECggEBAJwJEpII1htJJ0PPpmN54xsVHuLldcB1fadcfNxjjc2wHWFOcFfCL+N8K0v4mGFHzDmeATYfPa1mTHdGpruwcUJ258thdAm06sE+4yWxG4dapiW3xHY82GlCuI0SaHxHh7L2PIxvhp84JVN76Qpwgx75SimG0Rj/IseRHhQB/G4uEuoU98ia0dsCQzD9iOB1kxwpDXdgMWLZNnceV4m1s0b9Rt4axnfvjTdVv9DIyipHsAuPqbSlX66zEeBPAsdYgiN10TdO0IaCfnalAdZ8M+GLUn6HbuCxA3jK2fQypd8eo1ZdLAIP2O08OzB+33gnQ33Ib4YgsqyZEHB+K+S5PwECgYEA17U30WpCYCX1NzzUevA7KmGXzv3RgZAANy1io5ReH2ZdF1NcfCFcahzf4PBcMZEEuVLO0FJReHqkATeauXhF/oZDYR4EbQlhQ+J/qtJO4W+sl9gpWwazBmyXWnEN2zgw2IvSupgi1U3GPgxxpXE5vE1NLvEo0yaAOlWYeTRdizECgYEAz7ZplWVwNQyy42CzB5dIQeZb8Z+WnkBTrr8Dej22owJXM4TeNIxgwoDzvxQhyZ0G3vCKTDmHspygrd7s1RUQdWkhd5tOdWiUv5wni0ldRFZAHAfsGusHMkR6ZKbtxp2wdgCGjgbWjdInEKzNC1M1yWi/vfJfQEJgVKfvvo1mja0CgYBHTFDc2UCDQ0igL20UDZ+gzI0/D8pWBuDrXAcEhp/txQn0Ecu6A9TmBhFB6nCuuX5UOzi8xtjC99aJyHVN5KFOFdbjnOZdnAIYTB9iuQz1mtHzhrF0suwtrWsBq+imkxYiHWVT48Fvu7tQ+w/9XUV2Jh7i6zdRQ6KSpYQ2W8anoQKBgHafwqTjjbV+Txu0Ogp3x3h7Sr8vWSF/s0r1I9NIM2ndCFgP5ac1FH2Aj7Psl29BEo936EOoB2tmMA2cZr06jm+/XrGkLKa411qmn57Ygz9n0q0viRPGbhGzMgMRonHv1LtPiYjLNvU/s7e+OEvjdbBU9kxQgz17qvAuCKlWr97xAoGBAMk5zMGtxI87t1sEqybVRowTHofWhZVJS2lOeUMgYh3Xv+TtdMtMhTXXz7dgXd7j5Vk1Vawdo/sqTgtiyQ8xlUxVW+B+tzEHhcq8mh98FcYIqf0SPOmFiJBbuGyC+qIrXNFiGPgIetdXk2arXOr87XAQ4QLmQvs/YPgQ3fv4vTVm-----END PRIVATE KEY-----\";\n  const consumerID = \"45954df0-cff0-4104-bddd-4cbdc353f0aa\";\n  const walmartAuthHeaders = generateWalmartAuthHeaders(consumerID, \"1\", privateKey);\n\n  const walmartSearch = () => {\n    fetch(\"https://developer.api.walmart.com/api-proxy/service/affil/product/v2/search?query=tv\", {\n      method: \"GET\",\n      headers: walmartAuthHeaders,\n      mode: \"no-cors\",\n      \"Content-Type\": \"application/json\"\n    }).then(res => console.log(res));\n  };\n\n  function generateWalmartAuthHeaders(consumerId, keyVer, privateKey) {\n    const hashList = {\n      \"WM_CONSUMER.ID\": consumerId,\n      \"WM_CONSUMER.INTIMESTAMP\": Date.now(),\n      \"WM_SEC.KEY_VERSION\": keyVer\n    };\n    const sortedHashString = `${hashList[\"WM_CONSUMER.ID\"]}\\n${hashList[\"WM_CONSUMER.INTIMESTAMP\"]}\\n${hashList[\"WM_SEC.KEY_VERSION\"]}\\n`;\n    const signer = new nodeRSA(privateKey, \"pkcs8-private-pem\");\n    const signature = signer.sign(sortedHashString);\n    const signature_enc = signature.toString(\"base64\");\n    return {\n      \"WM_SEC.AUTH_SIGNATURE\": signature_enc,\n      \"WM_CONSUMER.INTIMESTAMP\": hashList[\"WM_CONSUMER.INTIMESTAMP\"],\n      \"WM_CONSUMER.ID\": hashList[\"WM_CONSUMER.ID\"],\n      \"WM_SEC.KEY_VERSION\": hashList[\"WM_SEC.KEY_VERSION\"]\n    };\n  }\n\n  const getToken = () => {\n    const requestOptions = {\n      method: \"POST\",\n      mode: \"no-cors\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        Authorization: base64ClientCredentials\n      },\n      body: JSON.stringify({\n        grant_type: \"client_credentials\",\n        scope: \"https://api.ebay.com/oauth/api_scope\"\n      })\n    };\n    fetch( //\"https://api.sandbox.ebay.com/identity/v1/oauth2/token\",\n    \"https://cors-anywhere.herokuapp.com/https://api.sandbox.ebay.com/identity/v1/oauth2/token\", requestOptions).then(res => {\n      console.log(\"GET TOKEN:\");\n      console.log(res);\n    }).catch(error => {\n      console.error(\"There was an error!\", error);\n    });\n  };\n\n  const ebayResponse = () => {\n    const requestOptions = {\n      method: \"POST\",\n      mode: \"no-cors\"\n    };\n    fetch(\"https://svcs.sandbox.ebay.com/services/search/FindingService/v1?OPERATION-NAME=findItemsByKeywords&SERVICE-VERSION=1.0.0&SECURITY-APPNAME=PhilippB-Fiindii-SBX-df2241f4a-e35c32c6&RESPONSE-DATA-FORMAT=XML&REST-PAYLOAD&keywords=iphone&paginationInput.entriesPerPage=100\", requestOptions).then(res => {\n      console.log(res);\n    });\n  };\n  /*const axiosEbayResponse = () => {\n    axios\n      .post(\n        \"https://svcs.sandbox.ebay.com/services/search/FindingService/v1?OPERATION-NAME=findItemsByKeywords&SERVICE-VERSION=1.0.0&SECURITY-APPNAME=PhilippB-Fiindii-SBX-df2241f4a-e35c32c6&RESPONSE-DATA-FORMAT=XML&REST-PAYLOAD&keywords=iphone&paginationInput.entriesPerPage=100\"\n      )\n      .then(function (response) {\n        console.log(response.data);\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  };*/\n\n  /*const ebayResponse = () => {\n    console.log(\"IN EBAY RESPONSE\");\n    const requestOptions = {\n      method: \"POST\",\n      headers: {\n        \"X-EBAY-SOA-SECURITY-APPNAME\":\n          \"PhilippB-Fiindii-SBX-df2241f4a-e35c32c6\",\n        \"X-EBAY-SOA-OPERATION-NAME\": \"findItemsByKeywords\",\n      },\n      //body: JSON.stringify({ title: 'React POST Request Example' })\n    };\n     fetch(\"./ebay.xml\", requestOptions)\n      .then((res) => res.json())\n      .then((json) => {\n        console.log(\"IN FETCH BODY\");\n        console.log(json);\n      });\n  };*/\n\n  /*const ebayXMLResponse = () => {\n    var xhr = new XMLHttpRequest();\n     xhr.addEventListener(\"load\", () => {\n      console.log(\"IN EVENT LISTENER IN EVENT LISTENER\");\n      console.log(xhr.responseText);\n    });\n     xhr.open(\n      \"POST\",\n      \"https://svcs.sandbox.ebay.com/services/search/FindingService/v1?OPERATION-NAME=findItemsByKeywords&SERVICE-VERSION=1.0.0&SECURITY-APPNAME=PhilippB-Fiindii-SBX-df2241f4a-e35c32c6&RESPONSE-DATA-FORMAT=XML&REST-PAYLOAD&keywords=iphone&paginationInput.entriesPerPage=100\"\n    );\n     xhr.send();\n  };*/\n\n\n  return __jsx(\"div\", {\n    className: \"topnav\"\n  }, __jsx(\"h1\", null, \"query: \", query), __jsx(\"h1\", null, \"searchQuery: \", searchQuery), __jsx(\"h1\", null, \"cat fact: \", fact.items.fact), __jsx(\"form\", {\n    onSubmit: e => handleSubmit(e)\n  }, __jsx(\"input\", {\n    id: \"queryField\",\n    type: \"text\",\n    placeholder: \"Search..\",\n    onChange: e => handleChange(e)\n  })));\n};\n\nexport default Search;","map":null,"metadata":{},"sourceType":"module"}